<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Fixing High CPU and Memory Usage in Azure App Service | KasdevTech</title>
<meta name="keywords" content="Azure, AppService, Troubleshooting, Performance, DevOps">
<meta name="description" content="A step-by-step guide to troubleshoot and resolve performance issues in Azure App Service caused by high CPU or memory usage.">
<meta name="author" content="Kasi Suresh">
<link rel="canonical" href="http://localhost:1313/azure/appservice-high-cpu/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/azure/appservice-high-cpu/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/azure/appservice-high-cpu/">
  <meta property="og:site_name" content="KasdevTech">
  <meta property="og:title" content="Fixing High CPU and Memory Usage in Azure App Service">
  <meta property="og:description" content="A step-by-step guide to troubleshoot and resolve performance issues in Azure App Service caused by high CPU or memory usage.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="azure">
    <meta property="article:published_time" content="2025-08-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-16T00:00:00+00:00">
    <meta property="article:tag" content="Azure">
    <meta property="article:tag" content="AppService">
    <meta property="article:tag" content="Troubleshooting">
    <meta property="article:tag" content="Performance">
    <meta property="article:tag" content="Devops">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fixing High CPU and Memory Usage in Azure App Service">
<meta name="twitter:description" content="A step-by-step guide to troubleshoot and resolve performance issues in Azure App Service caused by high CPU or memory usage.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Azure",
      "item": "http://localhost:1313/azure/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Fixing High CPU and Memory Usage in Azure App Service",
      "item": "http://localhost:1313/azure/appservice-high-cpu/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Fixing High CPU and Memory Usage in Azure App Service",
  "name": "Fixing High CPU and Memory Usage in Azure App Service",
  "description": "A step-by-step guide to troubleshoot and resolve performance issues in Azure App Service caused by high CPU or memory usage.",
  "keywords": [
    "Azure", "AppService", "Troubleshooting", "Performance", "DevOps"
  ],
  "articleBody": "Fixing High CPU and Memory Usage in Azure App Service Your app is running fine, and then suddenly… users complain about slowness or the app even crashes.\nWhen you check the Azure Portal, you see CPU pegged at 90–100% or memory exhausted.\nThis is a very common real-world issue in Azure App Service. Let’s walk step by step.\nStep 1: Monitor Metrics Go to: Azure Portal → App Service → Metrics → CPU Percentage / Memory Working Set Look for spikes during:\nHigh user traffic Background jobs Large API calls You can also run via CLI:\naz monitor metrics list \\ --resource /subscriptions//resourceGroups/MyRG/providers/Microsoft.Web/sites/MyAppService \\ --metric \"CpuPercentage\" --interval PT1M This gives you CPU usage minute by minute.\nStep 2: Use App Service Diagnostics In the App Service → Diagnose and Solve Problems: Select Availability \u0026 Performance Check High CPU Analysis or High Memory Analysis This shows you: Top requests consuming resources Long-running threads Memory leaks Step 3: Profile the App Enable Application Insights Profiler: Portal → App Service → Application Insights → Turn On Profiler Capture snapshots during high load Review flame charts to see slow functions or memory leaks Step 4: Scale Out or Scale Up Sometimes, the fix is simple: add more resources. Scale Up → Increase plan (B1 → S1 → P1v3) Scale Out → Add more instances az appservice plan update \\ --name MyAppPlan \\ --resource-group MyRG \\ --number-of-workers 3 This adds 3 worker instances to balance load.\nStep 5: Optimize the App High CPU isn’t always Azure’s fault. Check for: Infinite loops in code Heavy synchronous operations Poor database queries ✅ Use async programming ✅ Cache results in Azure Cache for Redis ✅ Optimize database queries with indexes\nStep 6: Use Autoscale Enable Autoscale Rules to handle traffic spikes: Portal → App Service Plan → Scale Out (App Service Plan) Example:\nScale out if CPU \u003e 75% for 10 minutes Scale back in when CPU \u003c 40% Step 7: Restart and Recover If your app gets stuck:\naz webapp restart --name MyAppService --resource-group MyRG Sometimes a simple restart clears memory leaks temporarily until you apply a permanent fix.\nCommon Causes of High CPU/Memory Unoptimized Code → Loops, blocking threads, recursive calls Leaky Dependencies → Not disposing connections properly Bad DB Queries → Full table scans Large Payloads → JSON/XML parsing at scale Traffic Surge → Sudden load without autoscale Best Practices Always enable Application Insights for monitoring Use Azure Front Door or Azure CDN to offload static content Offload long jobs to Azure Functions or Azure WebJobs Test performance with Azure Load Testing Final Take High CPU and memory issues in Azure App Service are often a mix of code inefficiency + resource limits. With monitoring, scaling, and profiling tools, you can quickly identify whether the fix is your app or your plan.\nRemember: Don’t guess → Measure → Fix → Scale.\n– Kasi @ KasdevTech or LinkedIn\n",
  "wordCount" : "482",
  "inLanguage": "en",
  "datePublished": "2025-08-16T00:00:00Z",
  "dateModified": "2025-08-16T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Kasi Suresh"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/azure/appservice-high-cpu/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "KasdevTech",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="KasdevTech (Alt + H)">
                <img src="http://localhost:1313/images/kasdev.png" alt="" aria-label="logo"
                    height="30">KasdevTech</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/azure/" title="Azure">
                    <span>Azure</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/az-104/" title="AZ-104">
                    <span>AZ-104</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/devops/" title="DevOps">
                    <span>DevOps</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/finops/" title="FinOps">
                    <span>FinOps</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/terraform/" title="Terraform">
                    <span>Terraform</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/ai/" title="AI">
                    <span>AI</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/finsight/" title="Finsight">
                    <span>Finsight</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Fixing High CPU and Memory Usage in Azure App Service
    </h1>
    <div class="post-description">
      A step-by-step guide to troubleshoot and resolve performance issues in Azure App Service caused by high CPU or memory usage.
    </div>
    <div class="post-meta"><span title='2025-08-16 00:00:00 +0000 UTC'>August 16, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Kasi Suresh

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#fixing-high-cpu-and-memory-usage-in-azure-app-service" aria-label="Fixing High CPU and Memory Usage in Azure App Service">Fixing High CPU and Memory Usage in Azure App Service</a></li>
                <li>
                    <a href="#step-1-monitor-metrics" aria-label="Step 1: Monitor Metrics">Step 1: Monitor Metrics</a></li>
                <li>
                    <a href="#step-2-use-app-service-diagnostics" aria-label="Step 2: Use App Service Diagnostics">Step 2: Use App Service Diagnostics</a></li>
                <li>
                    <a href="#step-3-profile-the-app" aria-label="Step 3: Profile the App">Step 3: Profile the App</a></li>
                <li>
                    <a href="#step-4-scale-out-or-scale-up" aria-label="Step 4: Scale Out or Scale Up">Step 4: Scale Out or Scale Up</a></li>
                <li>
                    <a href="#step-5-optimize-the-app" aria-label="Step 5: Optimize the App">Step 5: Optimize the App</a></li>
                <li>
                    <a href="#step-6-use-autoscale" aria-label="Step 6: Use Autoscale">Step 6: Use Autoscale</a></li>
                <li>
                    <a href="#step-7-restart-and-recover" aria-label="Step 7: Restart and Recover">Step 7: Restart and Recover</a></li>
                <li>
                    <a href="#common-causes-of-high-cpumemory" aria-label="Common Causes of High CPU/Memory">Common Causes of High CPU/Memory</a></li>
                <li>
                    <a href="#best-practices" aria-label="Best Practices">Best Practices</a></li>
                <li>
                    <a href="#final-take" aria-label="Final Take">Final Take</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h4 id="fixing-high-cpu-and-memory-usage-in-azure-app-service">Fixing High CPU and Memory Usage in Azure App Service<a hidden class="anchor" aria-hidden="true" href="#fixing-high-cpu-and-memory-usage-in-azure-app-service">#</a></h4>
<p>Your app is running fine, and then suddenly…  users complain about <strong>slowness</strong> or the app even <strong>crashes</strong>.<br>
When you check the Azure Portal, you see CPU pegged at 90–100% or memory exhausted.<br>
This is a very <strong>common real-world issue</strong> in Azure App Service. Let’s walk step by step.</p>
<h4 id="step-1-monitor-metrics">Step 1: Monitor Metrics<a hidden class="anchor" aria-hidden="true" href="#step-1-monitor-metrics">#</a></h4>
<p>Go to:
<strong>Azure Portal → App Service → Metrics → CPU Percentage / Memory Working Set</strong>
Look for spikes during:</p>
<ul>
<li>High user traffic</li>
<li>Background jobs</li>
<li>Large API calls</li>
</ul>
<p>You can also run via CLI:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az monitor metrics list <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --resource /subscriptions/&lt;subid&gt;/resourceGroups/MyRG/providers/Microsoft.Web/sites/MyAppService <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --metric <span style="color:#e6db74">&#34;CpuPercentage&#34;</span> --interval PT1M
</span></span></code></pre></div><p>This gives you CPU usage minute by minute.</p>
<h4 id="step-2-use-app-service-diagnostics">Step 2: Use App Service Diagnostics<a hidden class="anchor" aria-hidden="true" href="#step-2-use-app-service-diagnostics">#</a></h4>
<ul>
<li>In the App Service → Diagnose and Solve Problems:</li>
<li>Select Availability &amp; Performance</li>
<li>Check High CPU Analysis or High Memory Analysis
This shows you:</li>
<li>Top requests consuming resources</li>
<li>Long-running threads</li>
<li>Memory leaks</li>
</ul>
<h4 id="step-3-profile-the-app">Step 3: Profile the App<a hidden class="anchor" aria-hidden="true" href="#step-3-profile-the-app">#</a></h4>
<ul>
<li>Enable Application Insights Profiler:</li>
<li>Portal → App Service → Application Insights → Turn On Profiler</li>
<li>Capture snapshots during high load</li>
<li>Review flame charts to see slow functions or memory leaks</li>
</ul>
<h4 id="step-4-scale-out-or-scale-up">Step 4: Scale Out or Scale Up<a hidden class="anchor" aria-hidden="true" href="#step-4-scale-out-or-scale-up">#</a></h4>
<ul>
<li>Sometimes, the fix is simple: add more resources.</li>
<li>Scale Up → Increase plan (B1 → S1 → P1v3)</li>
<li>Scale Out → Add more instances</li>
</ul>
<pre tabindex="0"><code>az appservice plan update \
   --name MyAppPlan \
   --resource-group MyRG \
   --number-of-workers 3
</code></pre><p>This adds 3 worker instances to balance load.</p>
<h4 id="step-5-optimize-the-app">Step 5: Optimize the App<a hidden class="anchor" aria-hidden="true" href="#step-5-optimize-the-app">#</a></h4>
<ul>
<li>High CPU isn’t always Azure’s fault. Check for:</li>
<li>Infinite loops in code</li>
<li>Heavy synchronous operations</li>
<li>Poor database queries</li>
</ul>
<p>✅ Use async programming
✅ Cache results in Azure Cache for Redis
✅ Optimize database queries with indexes</p>
<h4 id="step-6-use-autoscale">Step 6: Use Autoscale<a hidden class="anchor" aria-hidden="true" href="#step-6-use-autoscale">#</a></h4>
<ul>
<li>Enable Autoscale Rules to handle traffic spikes:</li>
<li>Portal → App Service Plan → Scale Out (App Service Plan)</li>
</ul>
<p>Example:</p>
<ul>
<li>Scale out if CPU &gt; 75% for 10 minutes</li>
<li>Scale back in when CPU &lt; 40%</li>
</ul>
<h4 id="step-7-restart-and-recover">Step 7: Restart and Recover<a hidden class="anchor" aria-hidden="true" href="#step-7-restart-and-recover">#</a></h4>
<p>If your app gets stuck:</p>
<pre tabindex="0"><code>az webapp restart --name MyAppService --resource-group MyRG
</code></pre><p>Sometimes a simple restart clears memory leaks temporarily until you apply a permanent fix.</p>
<h4 id="common-causes-of-high-cpumemory">Common Causes of High CPU/Memory<a hidden class="anchor" aria-hidden="true" href="#common-causes-of-high-cpumemory">#</a></h4>
<ul>
<li>Unoptimized Code → Loops, blocking threads, recursive calls</li>
<li>Leaky Dependencies → Not disposing connections properly</li>
<li>Bad DB Queries → Full table scans</li>
<li>Large Payloads → JSON/XML parsing at scale</li>
<li>Traffic Surge → Sudden load without autoscale</li>
</ul>
<h4 id="best-practices">Best Practices<a hidden class="anchor" aria-hidden="true" href="#best-practices">#</a></h4>
<ul>
<li>Always enable Application Insights for monitoring</li>
<li>Use Azure Front Door or Azure CDN to offload static content</li>
<li>Offload long jobs to Azure Functions or Azure WebJobs</li>
<li>Test performance with Azure Load Testing</li>
</ul>
<h4 id="final-take">Final Take<a hidden class="anchor" aria-hidden="true" href="#final-take">#</a></h4>
<p>High CPU and memory issues in Azure App Service are often a mix of code inefficiency + resource limits.
With monitoring, scaling, and profiling tools, you can quickly identify whether the fix is your app or your plan.</p>
<p>Remember: Don’t guess → Measure → Fix → Scale.</p>
<p><strong>– Kasi @ <a href="https://kasdevtech.com">KasdevTech</a></strong> or <a href="https://www.linkedin.com/in/kasi-suresh-992675177/">LinkedIn</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/azure/">Azure</a></li>
      <li><a href="http://localhost:1313/tags/appservice/">AppService</a></li>
      <li><a href="http://localhost:1313/tags/troubleshooting/">Troubleshooting</a></li>
      <li><a href="http://localhost:1313/tags/performance/">Performance</a></li>
      <li><a href="http://localhost:1313/tags/devops/">Devops</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">KasdevTech</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
