<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AZ-104 Deep Dive — Role Assignments & Automation | KasdevTech</title><meta name=keywords content="Azure,AZ-104,RBAC,Automation"><meta name=description content="Creating, assigning, removing, auditing and automating RBAC with CLI, PowerShell, ARM, Bicep and real-world enterprise workflows."><meta name=author content="Kasi Suresh"><link rel=canonical href=https://kasdevtech.github.io/az-104/series2-rbac/az-104-series2-2.2-role-assignments-automation/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://kasdevtech.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://kasdevtech.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://kasdevtech.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://kasdevtech.github.io/apple-touch-icon.png><link rel=mask-icon href=https://kasdevtech.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://kasdevtech.github.io/az-104/series2-rbac/az-104-series2-2.2-role-assignments-automation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://kasdevtech.github.io/az-104/series2-rbac/az-104-series2-2.2-role-assignments-automation/"><meta property="og:site_name" content="KasdevTech"><meta property="og:title" content="AZ-104 Deep Dive — Role Assignments & Automation"><meta property="og:description" content="Creating, assigning, removing, auditing and automating RBAC with CLI, PowerShell, ARM, Bicep and real-world enterprise workflows."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="az-104"><meta property="article:tag" content="Azure"><meta property="article:tag" content="AZ-104"><meta property="article:tag" content="RBAC"><meta property="article:tag" content="Automation"><meta name=twitter:card content="summary"><meta name=twitter:title content="AZ-104 Deep Dive — Role Assignments & Automation"><meta name=twitter:description content="Creating, assigning, removing, auditing and automating RBAC with CLI, PowerShell, ARM, Bicep and real-world enterprise workflows."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"az-104","item":"https://kasdevtech.github.io/az-104/"},{"@type":"ListItem","position":2,"name":"AZ-104 Deep Dive — Role Assignments \u0026 Automation","item":"https://kasdevtech.github.io/az-104/series2-rbac/az-104-series2-2.2-role-assignments-automation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AZ-104 Deep Dive — Role Assignments \u0026 Automation","name":"AZ-104 Deep Dive — Role Assignments \u0026 Automation","description":"Creating, assigning, removing, auditing and automating RBAC with CLI, PowerShell, ARM, Bicep and real-world enterprise workflows.","keywords":["Azure","AZ-104","RBAC","Automation"],"articleBody":"RBAC Deep Dive — Role Assignments \u0026 Automation This post provides step‑by‑step RBAC assignment automation for CLI, PowerShell, ARM, Bicep and Terraform.\nIncludes enterprise workflows used in real-large scale organizations.\n1. Role Assignment Concepts A role assignment binds:\nPrincipal → Role → Scope Examples:\nAssign VM Contributor to DevOps group at RG scope Assign Key Vault Secrets Officer to AppService MSI at resource scope 2. Create Role Assignments (CLI) Assign Owner at Subscription az role assignment create --assignee --role Owner --scope /subscriptions/ Assign VM Contributor at RG az role assignment create --assignee --role \"Virtual Machine Contributor\" --resource-group demo-rg Assign role to Managed Identity az role assignment create --assignee-object-id --role \"Storage Blob Data Contributor\" --scope /subscriptions//resourceGroups/demo-rg/providers/Microsoft.Storage/storageAccounts/kasdevsa 3. PowerShell RBAC Connect-AzAccount # Assign Reader New-AzRoleAssignment -ObjectId -RoleDefinitionName Reader -Scope \"/subscriptions/\" Remove assignment Remove-AzRoleAssignment -ObjectId -RoleDefinitionName Reader 4. Bicep RBAC Automation param principalId string resource role 'Microsoft.Authorization/roleAssignments@2022-04-01' = { name: guid(principalId, 'Reader') scope: subscription() properties: { roleDefinitionId: subscriptionResourceId('Microsoft.Authorization/roleDefinitions', 'acdd72a7-3385-48ef-bd42-f606fba81ae7') // Reader principalId: principalId } } 5. Terraform RBAC resource \"azurerm_role_assignment\" \"vm_admin\" { scope = azurerm_resource_group.demo.id role_definition_name = \"Virtual Machine Contributor\" principal_id = var.group_object_id } 6. RBAC Audit \u0026 Troubleshooting View role assignments for a resource az role assignment list --scope -o table Check why access is denied az role assignment list --assignee -o table Portal Tools Azure Portal → Resource → Access Control → Check Access\n7. Real‑World Patterns Pattern: Multi‑Layer RBAC Subscription: Reader for auditors RG: Contributor for DevOps Resource: Data roles (Storage Blob Data Reader) Pattern: Assign RBAC via CI/CD Use Bicep/Terraform pipelines to standardize RBAC per environment.\n8. Exam Tips ✔ Know how to assign roles via CLI and PowerShell\n✔ Understand scope differences\n✔ Expect questions on Managed Identity role assignments\n✔ Must know Reader vs Owner vs Contributor boundaries\n– Kasi @ KasdevTech\n","wordCount":"302","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Kasi Suresh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kasdevtech.github.io/az-104/series2-rbac/az-104-series2-2.2-role-assignments-automation/"},"publisher":{"@type":"Organization","name":"KasdevTech","logo":{"@type":"ImageObject","url":"https://kasdevtech.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kasdevtech.github.io/ accesskey=h title="KasdevTech (Alt + H)"><img src=https://kasdevtech.github.io/images/kasdev.png alt aria-label=logo height=30>KasdevTech</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kasdevtech.github.io/azure/ title=Azure><span>Azure</span></a></li><li><a href=https://kasdevtech.github.io/az-104/ title=AZ-104><span>AZ-104</span></a></li><li><a href=https://kasdevtech.github.io/devops/ title=DevOps><span>DevOps</span></a></li><li><a href=https://kasdevtech.github.io/finops/ title=FinOps><span>FinOps</span></a></li><li><a href=https://kasdevtech.github.io/terraform/ title=Terraform><span>Terraform</span></a></li><li><a href=https://kasdevtech.github.io/ai/ title=AI><span>AI</span></a></li><li><a href=https://kasdevtech.github.io/finsight/ title=Finsight><span>Finsight</span></a></li><li><a href=https://kasdevtech.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">AZ-104 Deep Dive — Role Assignments & Automation</h1><div class=post-description>Creating, assigning, removing, auditing and automating RBAC with CLI, PowerShell, ARM, Bicep and real-world enterprise workflows.</div><div class=post-meta>2 min&nbsp;·&nbsp;Kasi Suresh</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#rbac-deep-dive--role-assignments--automation aria-label="RBAC Deep Dive — Role Assignments & Automation">RBAC Deep Dive — Role Assignments & Automation</a></li><li><a href=#1-role-assignment-concepts aria-label="1. Role Assignment Concepts">1. Role Assignment Concepts</a></li><li><a href=#2-create-role-assignments-cli aria-label="2. Create Role Assignments (CLI)">2. Create Role Assignments (CLI)</a><ul><ul><li><a href=#assign-owner-at-subscription aria-label="Assign Owner at Subscription">Assign Owner at Subscription</a></li><li><a href=#assign-vm-contributor-at-rg aria-label="Assign VM Contributor at RG">Assign VM Contributor at RG</a></li><li><a href=#assign-role-to-managed-identity aria-label="Assign role to Managed Identity">Assign role to Managed Identity</a></li></ul></ul></li><li><a href=#3-powershell-rbac aria-label="3. PowerShell RBAC">3. PowerShell RBAC</a><ul><ul><li><a href=#remove-assignment aria-label="Remove assignment">Remove assignment</a></li></ul></ul></li><li><a href=#4-bicep-rbac-automation aria-label="4. Bicep RBAC Automation">4. Bicep RBAC Automation</a></li><li><a href=#5-terraform-rbac aria-label="5. Terraform RBAC">5. Terraform RBAC</a></li><li><a href=#6-rbac-audit--troubleshooting aria-label="6. RBAC Audit & Troubleshooting">6. RBAC Audit & Troubleshooting</a><ul><ul><li><a href=#view-role-assignments-for-a-resource aria-label="View role assignments for a resource">View role assignments for a resource</a></li><li><a href=#check-why-access-is-denied aria-label="Check why access is denied">Check why access is denied</a></li><li><a href=#portal-tools aria-label="Portal Tools">Portal Tools</a></li></ul></ul></li><li><a href=#7-realworld-patterns aria-label="7. Real‑World Patterns">7. Real‑World Patterns</a><ul><ul><li><a href=#pattern-multilayer-rbac aria-label="Pattern: Multi‑Layer RBAC">Pattern: Multi‑Layer RBAC</a></li><li><a href=#pattern-assign-rbac-via-cicd aria-label="Pattern: Assign RBAC via CI/CD">Pattern: Assign RBAC via CI/CD</a></li></ul></ul></li><li><a href=#8-exam-tips aria-label="8. Exam Tips">8. Exam Tips</a></li></ul></div></details></div><div class=post-content><h1 id=rbac-deep-dive--role-assignments--automation>RBAC Deep Dive — Role Assignments & Automation<a hidden class=anchor aria-hidden=true href=#rbac-deep-dive--role-assignments--automation>#</a></h1><p>This post provides <strong>step‑by‑step RBAC assignment automation</strong> for CLI, PowerShell, ARM, Bicep and Terraform.<br>Includes enterprise workflows used in real-large scale organizations.</p><hr><h1 id=1-role-assignment-concepts>1. Role Assignment Concepts<a hidden class=anchor aria-hidden=true href=#1-role-assignment-concepts>#</a></h1><p>A role assignment binds:</p><pre tabindex=0><code>Principal → Role → Scope
</code></pre><p>Examples:</p><ul><li>Assign VM Contributor to DevOps group at RG scope</li><li>Assign Key Vault Secrets Officer to AppService MSI at resource scope</li></ul><hr><h1 id=2-create-role-assignments-cli>2. Create Role Assignments (CLI)<a hidden class=anchor aria-hidden=true href=#2-create-role-assignments-cli>#</a></h1><h3 id=assign-owner-at-subscription>Assign Owner at Subscription<a hidden class=anchor aria-hidden=true href=#assign-owner-at-subscription>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az role assignment create   --assignee &lt;userObjectId&gt;   --role Owner   --scope /subscriptions/&lt;subscriptionId&gt;
</span></span></code></pre></div><h3 id=assign-vm-contributor-at-rg>Assign VM Contributor at RG<a hidden class=anchor aria-hidden=true href=#assign-vm-contributor-at-rg>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az role assignment create   --assignee &lt;groupObjectId&gt;   --role <span style=color:#e6db74>&#34;Virtual Machine Contributor&#34;</span>   --resource-group demo-rg
</span></span></code></pre></div><h3 id=assign-role-to-managed-identity>Assign role to Managed Identity<a hidden class=anchor aria-hidden=true href=#assign-role-to-managed-identity>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az role assignment create   --assignee-object-id &lt;miObjectId&gt;   --role <span style=color:#e6db74>&#34;Storage Blob Data Contributor&#34;</span>   --scope /subscriptions/&lt;subId&gt;/resourceGroups/demo-rg/providers/Microsoft.Storage/storageAccounts/kasdevsa
</span></span></code></pre></div><hr><h1 id=3-powershell-rbac>3. PowerShell RBAC<a hidden class=anchor aria-hidden=true href=#3-powershell-rbac>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Connect-AzAccount
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Assign Reader</span>
</span></span><span style=display:flex><span>New-AzRoleAssignment -ObjectId &lt;objectid&gt; -RoleDefinitionName Reader -Scope <span style=color:#e6db74>&#34;/subscriptions/&lt;sub&gt;&#34;</span>
</span></span></code></pre></div><h3 id=remove-assignment>Remove assignment<a hidden class=anchor aria-hidden=true href=#remove-assignment>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Remove-AzRoleAssignment -ObjectId &lt;objectid&gt; -RoleDefinitionName Reader
</span></span></code></pre></div><hr><h1 id=4-bicep-rbac-automation>4. Bicep RBAC Automation<a hidden class=anchor aria-hidden=true href=#4-bicep-rbac-automation>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bicep data-lang=bicep><span style=display:flex><span><span style=color:#66d9ef>param</span> principalId string
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> role <span style=color:#e6db74>&#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39;</span> = {
</span></span><span style=display:flex><span>  name: <span style=color:#a6e22e>guid</span>(principalId, <span style=color:#e6db74>&#39;Reader&#39;</span>)
</span></span><span style=display:flex><span>  scope: <span style=color:#a6e22e>subscription</span>()
</span></span><span style=display:flex><span>  properties: {
</span></span><span style=display:flex><span>    roleDefinitionId: <span style=color:#a6e22e>subscriptionResourceId</span>(<span style=color:#e6db74>&#39;Microsoft.Authorization/roleDefinitions&#39;</span>, <span style=color:#e6db74>&#39;acdd72a7-3385-48ef-bd42-f606fba81ae7&#39;</span>) <span style=color:#75715e>// Reader</span>
</span></span><span style=display:flex><span>    principalId: principalId
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h1 id=5-terraform-rbac>5. Terraform RBAC<a hidden class=anchor aria-hidden=true href=#5-terraform-rbac>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;azurerm_role_assignment&#34; &#34;vm_admin&#34;</span> {
</span></span><span style=display:flex><span>  scope              <span style=color:#f92672>=</span> <span style=color:#66d9ef>azurerm_resource_group</span>.<span style=color:#66d9ef>demo</span>.<span style=color:#66d9ef>id</span>
</span></span><span style=display:flex><span>  role_definition_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Virtual Machine Contributor&#34;</span>
</span></span><span style=display:flex><span>  principal_id       <span style=color:#f92672>=</span> <span style=color:#66d9ef>var</span>.<span style=color:#66d9ef>group_object_id</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h1 id=6-rbac-audit--troubleshooting>6. RBAC Audit & Troubleshooting<a hidden class=anchor aria-hidden=true href=#6-rbac-audit--troubleshooting>#</a></h1><h3 id=view-role-assignments-for-a-resource>View role assignments for a resource<a hidden class=anchor aria-hidden=true href=#view-role-assignments-for-a-resource>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az role assignment list --scope &lt;scope&gt; -o table
</span></span></code></pre></div><h3 id=check-why-access-is-denied>Check why access is denied<a hidden class=anchor aria-hidden=true href=#check-why-access-is-denied>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az role assignment list --assignee &lt;user&gt; -o table
</span></span></code></pre></div><h3 id=portal-tools>Portal Tools<a hidden class=anchor aria-hidden=true href=#portal-tools>#</a></h3><p>Azure Portal → Resource → Access Control → Check Access</p><hr><h1 id=7-realworld-patterns>7. Real‑World Patterns<a hidden class=anchor aria-hidden=true href=#7-realworld-patterns>#</a></h1><h3 id=pattern-multilayer-rbac>Pattern: Multi‑Layer RBAC<a hidden class=anchor aria-hidden=true href=#pattern-multilayer-rbac>#</a></h3><ul><li>Subscription: Reader for auditors</li><li>RG: Contributor for DevOps</li><li>Resource: Data roles (Storage Blob Data Reader)</li></ul><h3 id=pattern-assign-rbac-via-cicd>Pattern: Assign RBAC via CI/CD<a hidden class=anchor aria-hidden=true href=#pattern-assign-rbac-via-cicd>#</a></h3><p>Use Bicep/Terraform pipelines to standardize RBAC per environment.</p><hr><h1 id=8-exam-tips>8. Exam Tips<a hidden class=anchor aria-hidden=true href=#8-exam-tips>#</a></h1><p>✔ Know how to assign roles via CLI and PowerShell<br>✔ Understand scope differences<br>✔ Expect questions on Managed Identity role assignments<br>✔ Must know Reader vs Owner vs Contributor boundaries</p><hr><p><strong>– Kasi @ KasdevTech</strong></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://kasdevtech.github.io/tags/azure/>Azure</a></li><li><a href=https://kasdevtech.github.io/tags/az-104/>AZ-104</a></li><li><a href=https://kasdevtech.github.io/tags/rbac/>RBAC</a></li><li><a href=https://kasdevtech.github.io/tags/automation/>Automation</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://kasdevtech.github.io/>KasdevTech</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>